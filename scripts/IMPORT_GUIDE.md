# ๐ฅ ุฏููู ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุจูุงูุงุช ุฃุฎุฑู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ูุดุฑุญ ููููุฉ ุงุณุชูุฑุงุฏ ุฌููุน ุงูุฌุฏุงูู ูู ูุงุนุฏุฉ ุจูุงูุงุช Supabase ุฃุฎุฑู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงููุฉ.

---

## ๐ง ุงูุฅุนุฏุงุฏ ุงูุฃููู

### 1. ุงุญุตู ุนูู ุจูุงูุงุช ุงูุงุชุตุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุตุฏุฑ

ูู ููุญุฉ ุชุญูู Supabase ูููุดุฑูุน ุงููุตุฏุฑ:
```
https://supabase.com/dashboard/project/lyeryfsrhrxuepuqepgi/settings/api
```

ุณุชุญุชุงุฌ ุฅูู:
- โ **Project URL**: `https://lyeryfsrhrxuepuqepgi.supabase.co`
- โ **Anon/Public Key**: ุงูููุชุงุญ ุงูุนุงู ูููุดุฑูุน

### 2. ุชุนุฏูู ุงูุณูุฑูุจุช

ุงูุชุญ ุงูููู `scripts/import-from-source.js` ูุนุฏู ุงูุณุทูุฑ ุงูุชุงููุฉ:

```javascript
// ุงูุณุทุฑ 4: ุถุน ูููุฉ ุงููุฑูุฑ (ุงุฎุชูุงุฑู)
const SOURCE_DB_URL = 'postgresql://postgres:YOUR_PASSWORD@db.lyeryfsrhrxuepuqepgi.supabase.co:5432/postgres';

// ุงูุณุทุฑ 5: URL ุงููุดุฑูุน ุงููุตุฏุฑ (ููุฌูุฏ ุจุงููุนู)
const SOURCE_SUPABASE_URL = 'https://lyeryfsrhrxuepuqepgi.supabase.co';

// ุงูุณุทุฑ 6: ุถุน ุงูููุชุงุญ ุงูุนุงู
const SOURCE_SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...';
```

---

## ๐ ุทุฑู ุงูุงุณุชุฎุฏุงู

### ุงูุทุฑููุฉ 1๏ธโฃ: ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุฃููุงู (ููุตู ุจู)

```bash
node scripts/import-from-source.js test
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจููุงุนุฏ ุงูุจูุงูุงุช...

โ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุตุฏุฑ ูุงุฌุญ
โ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุฏู ูุงุฌุญ
```

---

### ุงูุทุฑููุฉ 2๏ธโฃ: ุงุณุชูุฑุงุฏ ุฌููุน ุงูุฌุฏุงูู

```bash
node scripts/import-from-source.js
```

**ูุงุฐุง ูุญุฏุซ:**
- ๐ ูุณุชูุฑุฏ ุฌููุน ุงูู 26 ุฌุฏูู
- ๐ ูุณุชุฎุฏู `upsert` ูุชุฌูุจ ุงูุชูุฑุงุฑ
- ๐ ูุนุฑุถ ุงูุชูุฏู ููู ุฌุฏูู
- ๐ ูุธูุฑ ุชูุฑูุฑ ููุงุฆู ุดุงูู

**ูุซุงู ุนูู ุงููุงุชุฌ:**
```
๐ ุจุฏุก ุนูููุฉ ุงูุงุณุชูุฑุงุฏ ุงูุดุงููุฉ
๐ ุนุฏุฏ ุงูุฌุฏุงูู: 26
============================================================

๐ฅ ุงุณุชูุฑุงุฏ ุงูุฌุฏูู: users
   ูุฌุฏ 150 ุตู ููุงุณุชูุฑุงุฏ
   ุชูุฏู: 100/150 ุตู
   ุชูุฏู: 150/150 ุตู
โ ุชู ุงุณุชูุฑุงุฏ 150 ุตู ูู users

๐ฅ ุงุณุชูุฑุงุฏ ุงูุฌุฏูู: waqf_lands
   ูุฌุฏ 320 ุตู ููุงุณุชูุฑุงุฏ
...

============================================================
๐ ุชูุฑูุฑ ุงูุงุณุชูุฑุงุฏ ุงูููุงุฆู
============================================================
โ ุฌุฏุงูู ูุงุฌุญุฉ: 24/26
โ ุฌุฏุงูู ูุงุดูุฉ: 2
๐ ุฅุฌูุงูู ุงูุตููู: 5,420
โฑ๏ธ  ุงูููุช ุงููุณุชุบุฑู: 45.32 ุซุงููุฉ

โจ ุงูุชููุช ุนูููุฉ ุงูุงุณุชูุฑุงุฏ!
```

---

### ุงูุทุฑููุฉ 3๏ธโฃ: ุงุณุชูุฑุงุฏ ุฌุฏุงูู ูุญุฏุฏุฉ ููุท

```bash
node scripts/import-from-source.js tables users waqf_lands cases
```

**ูุชู ุชุณุชุฎุฏููุง:**
- โ ุนูุฏูุง ุชุฑูุฏ ุฌุฏุงูู ูุนููุฉ ููุท
- โ ูุฅุนุงุฏุฉ ุงุณุชูุฑุงุฏ ุฌุฏูู ูุนูู ุจุนุฏ ูุดู
- โ ููุงุฎุชุจุงุฑ ูุจู ุงูุงุณุชูุฑุงุฏ ุงููุงูู

---

## ๐ ุงูุฌุฏุงูู ุงููุฏุนููุฉ

ุงูุณูุฑูุจุช ูุณุชูุฑุฏ ุงูุฌุฏุงูู ุงูุชุงููุฉ:

### ุฌุฏุงูู ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช
- โ `users` - ุงููุณุชุฎุฏููู
- โ `user_permissions` - ุตูุงุญูุงุช ุงููุณุชุฎุฏููู

### ุฌุฏุงูู ุงูุฃููุงู
- โ `waqf_lands` - ุงูุฃุฑุงุถู ุงูููููุฉ
- โ `waqf_registry` - ุณุฌู ุงูุฃููุงู ุงููุทูู

### ุฌุฏุงูู ุงููุนุงููุงุช ูุงููุซุงุฆู
- โ `cases` - ุงููุถุงูุง ูุงููุนุงููุงุช
- โ `documents` - ุงููุซุงุฆู
- โ `appointments` - ุงูููุงุนูุฏ

### ุฌุฏุงูู ุงููุณุงุฌุฏ ูุงูุฎุฏูุงุช
- โ `mosques` - ุงููุณุงุฌุฏ
- โ `friday_sermons` - ุฎุทุจ ุงูุฌูุนุฉ
- โ `services` - ุงูุฎุฏูุงุช
- โ `e_services` - ุงูุฎุฏูุงุช ุงูุฅููุชุฑูููุฉ
- โ `social_services` - ุงูุฎุฏูุงุช ุงูุงุฌุชูุงุนูุฉ

### ุฌุฏุงูู ุงูุฃุฎุจุงุฑ ูุงูุฅุนูุงูุงุช
- โ `news` - ุงูุฃุฎุจุงุฑ
- โ `announcements` - ุงูุฅุนูุงูุงุช
- โ `activities` - ุงูุฃูุดุทุฉ
- โ `projects` - ุงููุดุงุฑูุน

### ุฌุฏุงูู ุงููุธุงู
- โ `notifications` - ุงูุฅุดุนุงุฑุงุช
- โ `audit_logs` - ุณุฌูุงุช ุงููุฑุงุฌุนุฉ
- โ `system_settings` - ุฅุนุฏุงุฏุงุช ุงููุธุงู
- โ `search_history` - ุณุฌู ุงูุจุญุซ
- โ `backups` - ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ

### ุฌุฏุงูู ูุชููุนุฉ
- โ `ministers` - ุงููุฒุฑุงุก
- โ `organizational_structure` - ุงููููู ุงูุชูุธููู
- โ `media_gallery` - ูุนุฑุถ ุงููุณุงุฆุท
- โ `gis_data` - ุจูุงูุงุช GIS
- โ `reports` - ุงูุชูุงุฑูุฑ

---

## โ๏ธ ููู ูุนูู ุงูุณูุฑูุจุช

### 1. ุงูุงุชุตุงู
```javascript
sourceClient = Supabase ุงููุตุฏุฑ
targetClient = Supabase ุงููุฏู (ุงูุญุงูู)
```

### 2. ุงููุฑุงุกุฉ
```javascript
SELECT * FROM table_name
```

### 3. ุงููุชุงุจุฉ (ุจุฏูู ุชูุฑุงุฑ)
```javascript
UPSERT INTO target_table
ON CONFLICT (id) DO UPDATE
```

### 4. Batch Processing
- ูุณุชูุฑุฏ 100 ุตู ูู ูู ุฏูุนุฉ
- ูููุน timeout ุนูู ุงูุฌุฏุงูู ุงููุจูุฑุฉ

---

## ๐ก๏ธ ููุฒุงุช ุงูุฃูุงู

### โ ุงูุญูุงูุฉ ูู ุงูุชูุฑุงุฑ
- ูุณุชุฎุฏู `upsert` ูุน `onConflict: 'id'`
- ูู ูุชู ุชูุฑุงุฑ ุงูุจูุงูุงุช ุญุชู ูู ุดุบูุช ุงูุณูุฑูุจุช ูุฑุชูู

### โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ูุณุชูุฑ ุญุชู ูู ูุดู ุฌุฏูู ูุงุญุฏ
- ูุณุฌู ุฌููุน ุงูุฃุฎุทุงุก ูู ุงูุชูุฑูุฑ ุงูููุงุฆู

### โ ุงูุชุญูู ูู ุงูุฌุฏุงูู
- ูุชุญูู ูู ูุฌูุฏ ุงูุฌุฏูู ูุจู ุงูุงุณุชูุฑุงุฏ
- ูุชุฎุทู ุงูุฌุฏุงูู ุบูุฑ ุงูููุฌูุฏุฉ

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. ุงูุตูุงุญูุงุช
- ูุฌุจ ุฃู ูููู ูุฏูู ุตูุงุญูุงุช ูุฑุงุกุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุตุฏุฑ
- ูุฌุจ ุฃู ูููู ูุฏูู ุตูุงุญูุงุช ูุชุงุจุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุฏู

### 2. Row Level Security (RLS)
- ุฅุฐุง ูุงู RLS ููุนูุ ูุฏ ุชุญุชุงุฌ ูุงุณุชุฎุฏุงู `service_role_key` ุจุฏูุงู ูู `anon_key`
- ุฃู ุชุนุทูู RLS ูุคูุชุงู ุฃุซูุงุก ุงูุงุณุชูุฑุงุฏ

### 3. ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู
- ุงูุณูุฑูุจุช ูุณุชูุฑุฏ ุงูุฌุฏุงูู ุจุงูุชุฑุชูุจ
- ุฅุฐุง ูุงูุช ููุงู Foreign Keysุ ุชุฃูุฏ ูู ุชุฑุชูุจ ุงูุงุณุชูุฑุงุฏ

### 4. ุงูุจูุงูุงุช ุงููุจูุฑุฉ
- ุงูุฌุฏุงูู ุงููุจูุฑุฉ ูุฏ ุชุณุชุบุฑู ููุชุงู
- ุงูุณูุฑูุจุช ูุณุชุฎุฏู batch processing (100 ุตู/ุฏูุนุฉ)

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "relation does not exist"
**ุงูุญู:**
```bash
# ุงูุฌุฏูู ุบูุฑ ููุฌูุฏ ูู ุงููุตุฏุฑุ ุณูุชู ุชุฎุทูู ุชููุงุฆูุงู
```

### ุฎุทุฃ: "Invalid API key"
**ุงูุญู:**
```javascript
// ุชุญูู ูู SOURCE_SUPABASE_ANON_KEY
// ุงุญุตู ุนููู ูู: Settings > API > Project API keys
```

### ุฎุทุฃ: "Row level security"
**ุงูุญู:**
```javascript
// ุงุณุชุฎุฏู service_role_key ุจุฏูุงู ูู anon_key
const SOURCE_SUPABASE_KEY = 'service_role_key_here';
```

### ุฎุทุฃ: "duplicate key value"
**ุงูุญู:**
```javascript
// ุงูุณูุฑูุจุช ูุณุชุฎุฏู upsert ุชููุงุฆูุงู
// ููู ุชุฃูุฏ ูู ุฃู ุงูุนููุฏ 'id' ููุฌูุฏ
```

---

## ๐ ูุซุงู ูุงูู

```bash
# 1. ุงุฎุชุจุฑ ุงูุงุชุตุงู ุฃููุงู
node scripts/import-from-source.js test

# 2. ุฌุฑุจ ุฌุฏูู ูุงุญุฏ ููุงุฎุชุจุงุฑ
node scripts/import-from-source.js tables users

# 3. ุฅุฐุง ูุฌุญุ ุงุณุชูุฑุฏ ุงููู
node scripts/import-from-source.js

# 4. ุฃู ุงุณุชูุฑุฏ ุฌุฏุงูู ูุญุฏุฏุฉ
node scripts/import-from-source.js tables users waqf_lands cases documents
```

---

## ๐ ุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:

1. โ ุชุญูู ูู ุจูุงูุงุช ุงูุงุชุตุงู
2. โ ุฌุฑุจ `test` ุฃููุงู
3. โ ุงุณุชูุฑุฏ ุฌุฏูู ูุงุญุฏ ููุงุฎุชุจุงุฑ
4. โ ุฑุงุฌุน ุฑุณุงุฆู ุงูุฃุฎุทุงุก ูู ุงูุชูุฑูุฑ

---

## ๐ ูุตุงุฆุญ

1. **ุงููุณุฎ ุงูุงุญุชูุงุทู ุฃููุงู**
   ```bash
   # ูุจู ุงูุงุณุชูุฑุงุฏุ ุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ
   node scripts/export-all-tables.js
   ```

2. **ุงูุงุณุชูุฑุงุฏ ุงูุชุฏุฑูุฌู**
   ```bash
   # ุงุจุฏุฃ ุจุงูุฌุฏุงูู ุงูุตุบูุฑุฉ
   node scripts/import-from-source.js tables notifications announcements
   ```

3. **ุงููุฑุงูุจุฉ**
   ```bash
   # ุฑุงูุจ ุงูุชูุฏู ูู Supabase Dashboard
   https://supabase.com/dashboard/project/YOUR_PROJECT/database/tables
   ```

---

โจ **ุฌุงูุฒ ููุงุณุชูุฑุงุฏ!**
